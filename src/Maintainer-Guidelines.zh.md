
# 维护指南

**本指南适用于维护人员.**这些特殊的人**写访问**HOBPROW的知识库,并帮助合并他人的贡献.你可能会发现这里写的东西很有趣,但绝对不是初学者的指导.

也许你在寻找[公式食谱](Formula-Cookbook.md)?

这份文件是当前的实践.如果你想改变或讨论以下问题:打开公关建议改变.

## 快速检查表

这才是真正重要的:

-   确保名称似乎合理.
-   添加别名.
-   确保使用`keg_only :provided_by_macos`如果它已经配备了MaOS.
-   确保它不是一个可以安装的库[宝石](https://en.wikipedia.org/wiki/RubyGems),[cpan](https://en.wikipedia.org/wiki/Cpan)或[匹普](https://pip.pypa.io/en/stable/).
-   确保任何依赖性都是精确的和最小的.我们不需要支持软件的每一个可能的可选特征.
-   使用不需要瓶子的GITHUB壁纸和合并工作流.
-   使用`brew pull`否则,它会添加消息来自动关闭拉取请求和由BREW测试BOT构建的瓶子.
-   感谢人们的贡献.

检查依赖关系很重要,因为它们可能永远存在.没有人真正检查他们是否有必要.使用`:optional`和`:recommended`酌情修饰语.

尽可能少的东西.默认情况下禁用X11功能.例如,我们构建WiReSARK,但不是默认的重GTK/QT-GUI.

自制软件是关于UNIX软件的.建立的东西`.app`应该是在自制啤酒桶里.

### 命名

名称是最严格的项目,因为避免以后的名称更改是可取的.

选择一个名称,这是项目最常见的名称.例如,我们最初选择`objective-caml`但是我们应该选择`ocaml`. 在谈论这个项目时,选择别人对对方说的话.

将其他名称作为别名添加到`Aliases`在龙头根中.确保主页上引用的名称是其中之一,因为它可能是不同的,有下划线和连字符等等.

我们现在接受版本化公式只要它们[符合要求](Versions.md).

### 合并、再基、樱桃采摘

合并应在`Homebrew/brew`用于保存历史记录和GPG提交签名的存储库,以及通过GitHub进行挤压/合并应该用于那些公式不需要瓶子或者更改不需要拉新瓶子的公式.否则,你应该使用`brew pull`(或)`rebase`/`cherry-pick`捐款).

不要`rebase`直到你最终`push`. 一次`master`被推,你不能`rebase`:**你现在是维护者了!**

樱桃采摘会改变提交的日期,这有点糟透了.

不要`merge`不干净的树枝所以如果有人还在学习`git`他们的分支充满了无稽之谈`rebase`压扁这些约定.我们的主要分支历史应该对其他人有用,而不是混淆.

### 测试

我们至少需要检查一下它是如何建立的.使用[酿造试验机器人](Brew-Test-Bot.md)为此.

如果可能的话,验证公式.如果你不能告诉(例如,如果它是一个图书馆)相信原来的贡献者,它为他们工作,所以很可能是好的.如果你不是这个工具的专家,你就不能真正判断公式是否正确安装了程序.在某个时候,一个专家会来,哭诉蓝色的谋杀,它不起作用,并修复它.这就是开源的工作原理.理想情况下,请求A`test do`块以测试功能是否始终可用.

如果公式使用存储库,那么`url`参数应该有标记或修订.`url`S有版本并且是稳定的(尚未实现!).

## 常见的"哥特斯"

1.  [确保您已正确设置用户名和电子邮件地址](https://help.github.com/articles/setting-your-email-in-git/)
2.  如果你修改了樱桃采摘,就签下它们.[GITX DEV](https://github.com/rowanj/gitx)可以这样做,否则有一个命令行标志
3.  如果提交修复了错误,请使用"修复".γ104"关闭错误报告并链接到提交的语法"

### 复制品

我们现在接受MACOS附带的东西,只要它使用`keg_only :provided_by_macos`仅默认为桶.

### 添加注释

查阅问题单可能就足够了,但是要确保更改是清楚的,这样如果您来找他们,而不知道周围的问题,他们就会对您有意义.在其他项目上,我多次看到代码被删除,因为新的家伙不知道为什么会出现在那里.回归是吸吮.

### 不要让臃肿的分歧

修改樱桃拾取以移除只是空白中的更改的提交.他们是不可接受的,因为我们的历史是重要的.`git blame`应该有用的.

如果行本身有某种修改,而不是其中的空格,则允许(对Ruby标准等)进行空格更正(事实上这是一个很好的机会).但是要小心对内嵌修补程序进行更改,以确保它们仍然适用.

### 添加或更新公式

任何一个维护者都有必要批准和合并一个通过CI的新的或更新的公式的添加.但是,如果公式添加或更新证明有争议,则添加该公式的维护者将预期回答请求并修复将来出现的问题.

### 去除公式

公式:

-   在默认的自制程序前缀中至少有2/3个支持的MaOS版本
-   不需要上游拒绝的补丁工作
-   没有已知的安全漏洞或CVS的版本,我们封装
-   显示在我们的分析中仍然由用户安装`BuildError`\<25%

不应该从家庭酿造中移除.这个规则的例外是[版本公式](Versions.md)对于给定的公式,使用的标准更高,版本的数量也最大.

### 关闭问题/ PRS

维护人员(包括主要维护人员)不应关闭由其他维护人员打开的问题或拉出请求(注意,在此情况下合并不被视为关闭),除非它们已经过时(即,28天内没有看到更新),在这种情况下,它们可以被任何维护人员关闭.任何维护者被鼓励重新打开一个关闭的问题,当他们希望在这个问题上做额外的工作时.

任何维护者可以合并他们仔细审查过的任何PR,并通过任何其他维护者已经打开的CI.如果您不希望其他维护者合并您的PRS:请使用`do not merge`标签,以表明,直到您准备合并它自己.

## 回复PRS

任何维护者可以在用户提交的问题或CI失败后,恢复由另一个维护者创建的PR.创建原始PR的维护者应该得到不少于一个小时的时间自己修复问题或者如果愿意的话决定恢复PR本身.

## 通信

维护者有多种方式互相交流:

-   GITHUB的HOBPROW公共仓库
-   HubBurw在私人渠道(如GITHUB/SLAK/话语)之间的两个维护者之间的群组通信
-   家庭频道在私人频道上的两个维护者之间的直接1:1消息(例如imessage /懈怠/话语/ IRC/信鸽)

所有的交流都应该在GITHUB上公开进行.如果这是不可能或适当的(例如,安全泄露、两个维护者之间的人际问题、需要解决的紧急中断),则可以转移到维护者的私有组通信,以及,如果必要,1:1通信.技术决策不应该在1:1的通信中发生,但如果它们做了(或在过去做了),那么它们必须以GitHub上可链接的内容作为结束.例如,如果一年前在Slack上做出了一个技术决定,而另一个维护者/贡献者/用户在GitHub上询问它,那么这是一个向他们解释它的好机会,并且有一个将来可以链接到的东西.

这使得其他维护人员、贡献者和用户更容易跟上我们正在做的事情(更重要的是,我们为什么这样做),并且意味着决策具有可链接的URL.

所有维护者(和保持维护者)通过任何媒介进行通信是受约束的.[家酿行为准则](CODE_OF_CONDUCT.md#code-of-conduct). 对其他维护者、贡献者或用户的虐待行为将不被容忍;维护者将得到警告,如果他们的行为继续下去,他们将作为维护者被删除.

维护者应该自由地愉快地不同意其他维护者的工作和决定.积极鼓励维护人员之间健康、友好、技术上的分歧,并且应该在问题跟踪器上公开发生,以使项目更好.人际关系问题应该私下处理,最好是适度.如果工作或决定没有足够的文件或解释,任何维护人员或贡献者都应该随时要求澄清.任何维护者都不可能用"因为我这么说"或"我就是X"来做出决定.关于问题跟踪器的非主题讨论[自行车脱落](https://en.wikipedia.org/wiki/Law_of_triviality)个人攻击是被禁止的.

## 维护维护指南

应该有一个铅维护家自制.决策是由维护者的共识决定的.当未能达成共识时,主要维护者在决定任何决定的结果时具有最终发言权(尽管这种权力应该被节省使用).它们还应该被视为Homebrew本身的产品经理,并确保对整个Homebrew生态系统所做的更改是一致的,并为Homebrew的用户提供日益积极的体验.

正如Homebrew维护人员预计要花费更多的时间来审查和合并来自非维护人员贡献者的贡献而不是做出自己的贡献一样,主要维护人员应该花费大部分时间来审查来自其他维护人员的工作和指导其他维护人员内尔斯.

单独的Homebrew存储库不应该有正式的主维护者(尽管那些做最多工作的人会有最响亮的声音).

维护人员应该更加自由地愉快地表示不同意主要维护人员的工作和决定:随着更大的权威,处理和缓和技术分歧的责任也越来越大.

HouBurw的最后一个主要维护者将是Mike McQuaid.2月1日,Mike将辞去Homebrew首席维护员的职务,他的职责将交给项目领导委员会和/或新的技术指导委员会和/或其他机构.

这些日期之前的一些思考和讨论:

-   [Apache软件基金会的工作原理](https://www.apache.org/foundation/how-it-works.html)
-   [Debian项目负责人文档](<>)
-   [Debian技术委员会文件](https://www.debian.org/devel/tech-ctte)
-   [Debian的组织结构](https://www.debian.org/intro/organization)
-   [QEMU SFC PLC文件](https://wiki.qemu.org/Conservancy)
-   [LBGIT2 SFC PLC的创建探讨](https://github.com/libgit2/discussions/issues/9)

这些日期之前必须做的一些事情:

-   决定如何花更多的自制啤酒来帮助这个项目
-   决定如何达成技术和非技术的决策和解决冲突
-   移动自制到一个新的CI系统,不需要任何手动系统管理
-   尽可能多地搭载新的维护人员
-   一般来说,把麦克·麦奎德(Mike McQuaid)单独完成(并且一直如此)的任何其他职责移交给其他团队并记录下来
